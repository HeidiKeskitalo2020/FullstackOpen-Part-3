{"version":3,"sources":["components/PersonForm.js","components/Filter.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","addPerson","handlePersonChange","handleNumberChange","name","number","onSubmit","value","onChange","type","Filter","filter","handleFilterChange","Persons","persons","removePerson","personFilter","person","toLowerCase","includes","map","key","onClick","id","baseUrl","axios","get","then","response","data","personObject","post","put","delete","Notification","message","error","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","setMessage","setError","useEffect","personService","initialPerson","updatePerson","identity","find","w","returnedPerson","setTimeout","catch","e","status","event","target","console","log","preventDefault","every","p","concat","window","confirm","z","ignored","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.473911fd.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst PersonForm =({addPerson, handlePersonChange, handleNumberChange, name, number}) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n    <div>name: <input value={name} onChange={handlePersonChange}/></div>\r\n    <div>number: <input value={number} onChange={handleNumberChange} /></div>\r\n    <div>\r\n        <button type=\"submit\">add</button>\r\n    </div>       \r\n    </form>\r\n  )\r\n}\r\n\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Filter = ({filter, handleFilterChange}) => {\r\n    return (\r\n        <div>\r\n            filter show with <input value ={filter} onChange={handleFilterChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Persons = ({persons, filter, removePerson}) => {\r\n        const personFilter = persons\r\n        .filter(person => \r\n        person.name.toLowerCase().includes(filter.toLowerCase())) \r\n            return (\r\n                <div>\r\n                     {personFilter.map(persons => <li key={persons.name}>{persons.name} {persons.number}\r\n                         <button onClick={() => removePerson(persons.id)}>delete</button></li>)}\r\n                 </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = personObject => {\r\n  const request = axios.post(baseUrl, personObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, personObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, personObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\n\r\nconst Notification = ({ message, error }) => {\r\n    if (message === null && error === null) {\r\n        return null\r\n    }\r\n    else if (message !== null) {\r\n        return(\r\n            <div className= \"message\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n    else if (error !== null ) {\r\n        return (\r\n            <div className=\"error\">\r\n                {error}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport personService from './services/persons'\r\nimport  Notification from './components/Notification'\r\nimport './index.css'\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ message, setMessage ] = useState(null)\r\n  const [ error, setError ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPerson => {\r\n        setPersons(initialPerson)\r\n      })\r\n  }, [])\r\n\r\n  const doIFind = (person) => {\r\n    return persons.every((p => p.name.toLowerCase() !== person.name.toLowerCase()))\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    console.log('button clicked', event.target)\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      //date: new Date().toISOString(),\r\n      //id: persons.length + 1,\r\n    }\r\n\r\n    if (doIFind(personObject))\r\n    {\r\n    personService\r\n    .create(personObject)\r\n      .then(returnedPerson => {\r\n      setPersons(persons.concat(returnedPerson))\r\n      setNewName('')\r\n      setNewNumber('')\r\n\r\n      setMessage(`Added ${returnedPerson.name}`)\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 3000)\r\n    })\r\n    .catch(e => {\r\n      setError(e.response.data.error)\r\n      setTimeout(() => {\r\n        setError(null)\r\n      }, 4000)\r\n    })\r\n  }\r\n\r\n      else if (window.confirm(`${newName} is already added to phonebook,\r\n      replace the old number with a new one?`))\r\n            \r\n      {\r\n        updatePerson(personObject)\r\n      }\r\n  }\r\n\r\n  const updatePerson = (person) => {\r\n    const identity = persons.find(w => w.name.toLowerCase() === person.name.toLowerCase()).id\r\n    person = {...person, id: identity}\r\n\r\n    personService\r\n    .update(identity, person)\r\n      .then(returnedPerson => {\r\n      setPersons(persons.map(w => w.id !== identity ? w : returnedPerson))\r\n      setNewName('')\r\n      setNewNumber('')\r\n\r\n      setMessage(`Updated ${returnedPerson.name}`)\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 3000)\r\n      \r\n    }).catch(e => {\r\n        if (e.response.status === 400) {\r\n          setError(e.response.data.error)\r\n          setTimeout(() => {\r\n            setError(null)\r\n          }, 4000)\r\n        }\r\n        else\r\n        {\r\n          setPersons(persons.filter(w => w.id !== identity))\r\n          setError(`Information of ${person.name} has already been removed from the server`)\r\n          setTimeout(() => {\r\n              setError(null)\r\n          }, 4000);\r\n          setNewName('')\r\n          setNewNumber('')\r\n        }\r\n      })\r\n  }\r\n\r\n  const removePerson = (id) => {\r\n    console.log('pressing delete button')\r\n    const person = persons.find(z => z.id === id)\r\n    if (window.confirm(`Delete ${person.name} ?`)) \r\n\r\n      {personService\r\n      .remove(id)\r\n      .then(ignored => {\r\n        setPersons(persons.filter(z => id !== z.id))\r\n\r\n      })\r\n      }\r\n    }\r\n  \r\n  const handlePersonChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n  \r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value)\r\n  }\r\n  \r\n  \r\n  \r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} error={error} />\r\n      <Filter value={filter} handleFilterChange= {handleFilterChange} />\r\n      <h3>add a new</h3>\r\n      <PersonForm name={newName} handlePersonChange= {handlePersonChange} handleNumberChange={handleNumberChange} number={newNumber} addPerson={addPerson} />\r\n      <h2>Numbers</h2>\r\n      <Persons persons={persons} filter={filter} removePerson={removePerson}/>\r\n    </div>\r\n    )\r\n  \r\n  }\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from'./App'\r\n\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}