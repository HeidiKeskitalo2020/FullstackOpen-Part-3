{"version":3,"sources":["components/PersonForm.js","components/Filter.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","addPerson","handlePersonChange","handleNumberChange","name","number","onSubmit","value","onChange","type","Filter","filter","handleFilterChange","Persons","persons","removePerson","personFilter","toLowerCase","includes","map","key","onClick","id","baseUrl","axios","get","then","response","data","personObject","post","put","delete","Notification","message","error","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","setMessage","setError","useEffect","personService","initialPerson","updatePerson","person","identity","find","w","returnedPerson","setTimeout","catch","e","status","event","target","console","log","preventDefault","every","p","concat","window","confirm","z","ignored","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1ba2f855.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst PersonForm =({addPerson, handlePersonChange, handleNumberChange, name, number}) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n    <div>name: <input value={name} onChange={handlePersonChange}/></div>\r\n    <div>number: <input value={number} onChange={handleNumberChange} /></div>\r\n    <div>\r\n        <button type=\"submit\">add</button>\r\n    </div>       \r\n    </form>\r\n  )\r\n}\r\n\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Filter = ({filter, handleFilterChange}) => {\r\n    return (\r\n        <div>\r\n            filter show with <input value ={filter} onChange={handleFilterChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Persons = ({persons, filter, removePerson}) => {\r\n        const personFilter = persons\r\n        .filter(persons => \r\n        persons.name.toLowerCase().includes(filter.toLowerCase())) \r\n            return (\r\n                <div>\r\n                     {personFilter.map(persons => <li key={persons.name}>{persons.name} {persons.number}\r\n                         <button onClick={() => removePerson(persons.id)}>delete</button></li>)}\r\n                 </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = personObject => {\r\n  const request = axios.post(baseUrl, personObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, personObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, personObject)\r\n  return request.then(response => response.data)\r\n}\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\n\r\nconst Notification = ({ message, error }) => {\r\n    if (message === null && error === null) {\r\n        return null\r\n    }\r\n    else if (message !== null) {\r\n        return(\r\n            <div className= \"message\">\r\n                {message}\r\n            </div>\r\n        )\r\n    }\r\n    else if (error !== null ) {\r\n        return (\r\n            <div className=\"error\">\r\n                {error}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport Persons from './components/Persons'\r\nimport personService from './services/persons'\r\nimport  Notification from './components/Notification'\r\nimport './index.css'\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filter, setFilter ] = useState('')\r\n  const [ message, setMessage ] = useState(null)\r\n  const [ error, setError ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPerson => {\r\n        setPersons(initialPerson)\r\n      })\r\n  }, [])\r\n\r\n  const doIFind = (person) => {\r\n    return persons.every((p => p.name.toLowerCase() !== person.name.toLowerCase()))\r\n  }\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    console.log('button clicked', event.target)\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      //date: new Date().toISOString(),\r\n      //id: persons.length + 1,\r\n    }\r\n\r\n    if (doIFind(personObject))\r\n    {\r\n    personService\r\n    .create(personObject)\r\n      .then(returnedPerson => {\r\n      setPersons(persons.concat(returnedPerson))\r\n      setNewName('')\r\n      setNewNumber('')\r\n\r\n      setMessage(`Added ${returnedPerson.name}`)\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 3000)\r\n    })\r\n    .catch(e => {\r\n      setError(e.response.data.error)\r\n      setTimeout(() => {\r\n        setError(null)\r\n      }, 4000)\r\n    })\r\n  }\r\n\r\n      else if (window.confirm(`${newName} is already added to phonebook,\r\n      replace the old number with a new one?`))\r\n            \r\n      {\r\n        updatePerson(personObject)\r\n      }\r\n  }\r\n\r\n  const updatePerson = (person) => {\r\n    const identity = persons.find(w => w.name.toLowerCase() === person.name.toLowerCase()).id\r\n    person = {...person, id: identity}\r\n\r\n    personService\r\n    .update(identity, person)\r\n      .then(returnedPerson => {\r\n      setPersons(persons.map(w => w.id !== identity ? w : returnedPerson))\r\n      setNewName('')\r\n      setNewNumber('')\r\n\r\n      setMessage(`Updated ${returnedPerson.name}`)\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 3000)\r\n      \r\n    }).catch(e => {\r\n        if (e.response.status === 400) {\r\n          setError(e.response.data.error)\r\n          setTimeout(() => {\r\n            setError(null)\r\n          }, 4000)\r\n        }\r\n        else\r\n        {\r\n          setPersons(persons.filter(w => w.id !== identity))\r\n          setError(`Information of ${person.name} has already been removed from the server`)\r\n          setTimeout(() => {\r\n              setError(null)\r\n          }, 4000);\r\n          setNewName('')\r\n          setNewNumber('')\r\n        }\r\n      })\r\n  }\r\n\r\n  const removePerson = (id) => {\r\n    console.log('pressing delete button')\r\n    const person = persons.find(z => z.id === id)\r\n    if (window.confirm(`Delete ${person.name} ?`)) \r\n\r\n      {personService\r\n      .remove(id)\r\n      .then(ignored => {\r\n        setPersons(persons.filter(z => id !== z.id))\r\n\r\n      })\r\n      }\r\n    }\r\n  \r\n  const handlePersonChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n  \r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value)\r\n  }\r\n  \r\n  \r\n  \r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} error={error} />\r\n      <Filter value={filter} handleFilterChange= {handleFilterChange} />\r\n      <h3>add a new</h3>\r\n      <PersonForm name={newName} handlePersonChange= {handlePersonChange} handleNumberChange={handleNumberChange} number={newNumber} addPerson={addPerson} />\r\n      <h2>Numbers</h2>\r\n      <Persons persons={persons} filter={filter} removePerson={removePerson}/>\r\n    </div>\r\n    )\r\n  \r\n  }\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from'./App'\r\n\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}